# PRD-0010 Checklist: NAS SMB 연동

## Phase 1: 인프라 설정 (Critical)

### NAS 측 (Synology DSM)
- [ ] SMB 서비스 활성화 (제어판 → 파일 서비스 → SMB)
- [ ] 최대 SMB 프로토콜: SMB3 설정
- [ ] 공유 폴더 `docker` 생성/확인
- [ ] 하위 폴더 생성: `/volume1/docker/pokergfx/hands`
- [ ] 사용자 권한 설정 (읽기/쓰기)
- [ ] 방화벽 445/TCP 허용

### Windows 측
- [ ] 자격 증명 저장: `cmdkey /add:NAS_IP /user:사용자 /pass:비밀번호`
- [ ] 연결 테스트: `net use \\NAS_IP\docker`
- [ ] 파일 쓰기 테스트

### PokerGFX 설정
- [ ] JSON Export Path 설정: `\\NAS_IP\docker\pokergfx\hands\`
- [ ] Auto Export 활성화
- [ ] 테스트 핸드 → JSON 파일 생성 확인

---

## Phase 2: 코드 개선 (완료)

- [x] 파일 락 재시도 로직 (`json_file_watcher.py`) (#5)
- [x] 설정 검증 강화 (`settings.py`) (#5)
- [x] `_wait_for_file_ready()` 메서드 추가
- [x] `model_validator` 추가

---

## Phase 3: 문서화 (완료)

- [x] NAS 설정 가이드 (`docs/NAS_SETUP.md`)
- [x] 이슈 업데이트 가이드 (`docs/ISSUE_UPDATE_GUIDE.md`)
- [x] PRD-0010 작성 (`tasks/prds/PRD-0010-nas-smb-integration.md`)

---

## Phase 4: 통합 테스트

### 테스트 시나리오
- [ ] Windows → NAS 파일 쓰기 테스트
- [ ] Docker 컨테이너 파일 감지 테스트
- [ ] 파일 락 상황 시뮬레이션
- [ ] 연결 끊김/재연결 테스트

### 검증 항목
- [ ] 파일 처리 지연 < 5초
- [ ] 파일 락 재시도 정상 동작
- [ ] 중복 파일 감지 정상 동작
- [ ] 로그 출력 확인

---

## 진행 상황

| 날짜 | 작업 | 결과 | 담당 |
|------|------|------|------|
| 2026-01-09 | GitHub 이슈 #5 생성 | 완료 | Claude |
| 2026-01-09 | 코드 개선 (파일 락, 설정 검증) | 완료 | Claude |
| 2026-01-09 | 문서 작성 (NAS_SETUP, ISSUE_UPDATE_GUIDE) | 완료 | Claude |
| 2026-01-09 | PRD-0010 작성 | 완료 | Claude |
| - | NAS SMB 설정 | 대기 | 인프라 |
| - | Windows 자격 증명 설정 | 대기 | 인프라 |
| - | 통합 테스트 | 대기 | 개발 |
