# PRD-0005 Checklist: 통합 데이터베이스 및 자막 데이터 시스템

## 문서 정보

| 항목 | 내용 |
|------|------|
| **PRD ID** | PRD-0005 |
| **제목** | 통합 데이터베이스 및 자막 데이터 시스템 |
| **생성일** | 2025-12-25 |
| **수정일** | 2025-12-26 |
| **상태** | Draft |
| **진행률** | 0/28 (0%) |

---

## Phase 1: DB 기반 구축 (Week 1)

### 1.1 PostgreSQL 스키마
- [ ] sessions 테이블 DDL 작성
- [ ] tables 테이블 DDL 작성
- [ ] players 테이블 DDL 작성
- [ ] hands 테이블 DDL 작성
- [ ] player_hands 테이블 DDL 작성
- [ ] chip_flow 테이블 DDL 작성
- [ ] clip_markers 테이블 DDL 작성
- [ ] 인덱스 생성

### 1.2 Python 연동
- [ ] asyncpg 연결 풀 구현 (connection.py)
- [ ] DatabaseSettings 설정 클래스 추가
- [ ] BaseRepository 패턴 구현

---

## Phase 2: 핸드 저장 (Week 2)

### 2.1 Repository 구현
- [ ] HandRepository CRUD 구현
- [ ] PlayerRepository 구현 (이름 기반 자동 매칭)
- [ ] PlayerHandRepository 구현

### 2.2 FusionEngine 연동
- [ ] DB 저장 훅 추가
- [ ] hand_cards 저장 로직
- [ ] hand_actions 저장 로직

---

## Phase 3: Chip Flow (Week 3-4)

### 3.1 Chip Flow 구현
- [ ] ChipFlowRepository 구현
- [ ] stack_start/end 추적
- [ ] running_total 계산
- [ ] 시계열 쿼리 구현

---

## Phase 4: 자막 내보내기 (Week 5)

### 4.1 SubtitleExporter
- [ ] JSON 내보내기 구현
- [ ] Timecode 매핑 로직
- [ ] 20종 자막 유형 템플릿

### 4.2 EditSourceExporter
- [ ] EDL 형식 내보내기
- [ ] FCPXML 형식 내보내기
- [ ] JSON 메타데이터 내보내기

---

## 성공 기준

| 지표 | 목표값 | 현재값 | 상태 |
|------|--------|--------|------|
| 핸드 저장 시간 | < 50ms | - | - |
| 플레이어 조회/생성 | < 10ms | - | - |
| 세션 내보내기 (100핸드) | < 5s | - | - |
| Chip Flow 쿼리 | < 100ms | - | - |

---

## 관련 PR

| PR | 설명 | 상태 |
|----|------|------|
| - | - | - |

---

## 변경 이력

| 날짜 | 변경 내용 | 작성자 |
|------|----------|--------|
| 2025-12-26 | 초기 체크리스트 생성 | Claude |
