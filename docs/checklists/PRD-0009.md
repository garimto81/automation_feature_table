# PRD-0009 Checklist: GFX JSON Simulator

| 항목 | 값 |
|------|---|
| **PRD** | [PRD-0009](../PRD-0009-gfx-json-simulator.md) |
| **제목** | GFX JSON 시뮬레이터 (NAS 테스트용) |
| **상태** | Completed |
| **생성일** | 2026-01-08 |
| **업데이트** | 2026-01-13 |

---

## Phase 1: 핵심 시뮬레이터

- [x] HandSplitter 클래스 구현
  - [x] `split_hands()` - JSON에서 핸드 목록 추출
  - [x] `build_cumulative()` - 누적 JSON 생성
  - [x] 단위 테스트 작성

- [x] GFXJsonSimulator 기본 로직
  - [x] 시뮬레이터 클래스 구조
  - [x] `run()` - 시뮬레이션 실행 (async)
  - [x] `stop()` - 시뮬레이션 정지
  - [x] `get_progress()` - 진행률 반환
  - [x] 로그 시스템
  - [x] 단위 테스트 작성

- [x] CLI 인터페이스
  - [x] argparse 옵션 정의
  - [x] `--source`, `--target`, `--interval`
  - [x] `--no-gui` 옵션
  - [x] 명령어 테스트

---

## Phase 2: Streamlit GUI

- [x] Streamlit 앱 기본 레이아웃
  - [x] 페이지 설정 (제목, 아이콘)
  - [x] 사이드바 설정 패널
  - [x] 메인 영역 구성

- [x] 진행 바 및 상태 표시
  - [x] 진행률 바 (st.progress)
  - [x] 현재 핸드 / 전체 핸드 표시
  - [x] 경과 시간 / 남은 시간 표시
  - [x] 상태 아이콘 표시

- [x] 실시간 로그 뷰어
  - [x] 로그 메시지 표시
  - [x] 최근 100개 제한
  - [x] 자동 스크롤
  - [x] 1초 간격 새로고침

- [x] 제어 기능
  - [x] 시작 버튼
  - [x] 정지 버튼
  - [x] 백그라운드 실행

---

## Phase 3: 설정 및 에러 처리

- [x] .env 설정 통합
  - [x] `SIMULATOR_NAS_PATH`
  - [x] `SIMULATOR_INTERVAL_SEC`
  - [x] `SIMULATOR_SOURCE_PATH`
  - [x] `STREAMLIT_PORT`
  - [x] Settings 클래스 구현

- [x] NAS 연결 재시도 로직
  - [x] 연결 실패 감지
  - [x] 3회 재시도
  - [x] 재시도 간격 설정
  - [x] 에러 로그 기록

- [x] 에러 핸들링
  - [x] JSON 파싱 에러
  - [x] 파일 쓰기 에러
  - [x] 네트워크 에러
  - [x] 사용자 친화적 메시지

---

## Phase 4: 테스트 및 문서화

- [x] 단위 테스트
  - [x] `test_hand_splitter.py`
  - [x] `test_gfx_json_simulator.py`
  - [x] 커버리지 80% 이상 (25/25 passed)

- [x] 통합 테스트
  - [x] 로컬 폴더 쓰기 테스트 (`test_simulator_integration.py`)
  - [x] NAS 폴더 쓰기 테스트 (모킹 기반)

- [x] E2E 테스트
  - [x] Streamlit GUI 시작
  - [x] 시뮬레이션 전체 플로우 (`test_simulator_gui.py` 확장)

- [x] 문서화
  - [x] `src/simulator/README.md` 작성
  - [x] 사용 가이드 포함

---

## Phase 5: Nice to Have (추가 기능)

- [x] 일시 정지/재개 기능
  - [x] `pause()`, `resume()` 메서드 구현
  - [x] `asyncio.Event()` 기반 대기/재개
  - [x] GUI 일시정지/재개 버튼 추가
  - [x] 단위 테스트 추가 (5개)

- [x] 멀티 테이블 병렬 시뮬레이션
  - [x] `TableSimulationTask` 클래스 구현
  - [x] `ParallelSimulationOrchestrator` 클래스 구현
  - [x] `asyncio.gather()` 기반 병렬 실행
  - [x] GUI 병렬 모드 토글 추가
  - [x] 통합 테스트 추가 (5개)

---

## 진행률

| Phase | 완료 | 전체 | 진행률 |
|-------|-----|------|--------|
| Phase 1 | 12 | 12 | 100% |
| Phase 2 | 14 | 14 | 100% |
| Phase 3 | 12 | 12 | 100% |
| Phase 4 | 8 | 8 | 100% |
| **전체** | **46** | **46** | **100%** |

---

## 생성된 파일

| 파일 | 설명 |
|------|------|
| `src/simulator/__init__.py` | 모듈 초기화 |
| `src/simulator/hand_splitter.py` | 핸드 분리 로직 |
| `src/simulator/config.py` | 설정 관리 |
| `src/simulator/gfx_json_simulator.py` | 메인 시뮬레이터 + CLI |
| `src/simulator/gui/__init__.py` | GUI 모듈 초기화 |
| `src/simulator/gui/app.py` | Streamlit GUI |
| `src/simulator/gui/file_browser.py` | 파일 브라우저 유틸리티 |
| `src/simulator/README.md` | 사용자 가이드 |
| `tests/test_gfx_json_simulator.py` | 단위 테스트 (25개) |
| `tests/test_simulator_integration.py` | 통합 테스트 (14개) |
| `tests/e2e/test_simulator_gui.py` | E2E GUI 테스트 |
| `tests/e2e/conftest.py` | E2E 테스트 fixtures |
